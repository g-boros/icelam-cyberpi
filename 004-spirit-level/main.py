"""
Use CyberPi as spirit level
"""

import event, time, cyberpi

@event.start
def on_start():
    sprite_coordinate = cyberpi.sprite()
    sprite_point = cyberpi.sprite()

    while True:
        # welcome screen
        cyberpi.display.set_brush(255,255,255)
        cyberpi.display.show_label("Spirit Level", 16, "center", index = 0)
        cyberpi.display.show_label("Press B to start", 12, "bottom_mid", index = 1)

        # start peogram after button B is pressed
        while not cyberpi.controller.is_press("b"):
          pass

        # show coordinates on top left of screen
        cyberpi.background.fill(0, 0, 0)
        sprite_coordinate.set_align("top_left")
        sprite_coordinate.set_color(255, 255, 255)
        sprite_coordinate.move_to(0, 0)

        # Redraw coordinates and point while button A is not pressed
        while not cyberpi.controller.is_press("a"):
            roll_position = cyberpi.get_roll()
            pitch_position = cyberpi.get_pitch()

            sprite_coordinate.draw_text(str(roll_position) + ", " + str(pitch_position))
            sprite_point.move_to((64 - -roll_position * 2), (64 - -pitch_position * 2))

            # if CyberPi is on a perfectly horizontal surface, turn all elements on screen to green,
            # else make them white
            if roll_position == 0 and pitch_position == 0:
                sprite_point.draw_pixel(
                    [
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x7ed321,0x7ed321,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x7ed321,0x7ed321,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x7ed321,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000
                    ]
                )
                sprite_coordinate.set_color(126, 211, 33)
                cyberpi.led.on(126, 211, 33, "all")
            else:
                sprite_point.draw_pixel(
                    [
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0xffffff,0xffffff,0xffffff,0xffffff,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0xffffff,0xffffff,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0xffffff,0xffffff,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0xffffff,0xffffff,0xffffff,0xffffff,0xffffff,0xffffff,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,
                        0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000,0x000000
                    ]
                )
                sprite_coordinate.set_color(255, 255, 255)
                cyberpi.led.off(0)

            cyberpi.screen.render()
